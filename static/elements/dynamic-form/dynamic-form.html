<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="dynamic-form">
    <template>

    </template>
    <script>
        Polymer({
            is: "dynamic-form",

            properties: {
                metadata: {
                    type: Object,
                    value: function () {
                        return [
    {"field_verbose_name":"Comentario", "field_type":"text",},
    {"field_verbose_name":"Yes No", "field_type":"option", "options":[{"verbose":"----","values": "null"},{"verbose":"Si","values": "1"}] },
  ]
                    }
                },
                fields: Array,
                fieldsMapping: {
                    type: Object,
                    value: function () {
                        return {
                            'text': 'paper-input'
                            //'options':
                        }
                    }
                },
                formMetadataService: Object
            },

            factoryImpl: function () {
                this.getFormMetaData();
            },

            generateForm: function (event) {
                //event
                /*for(var i = 0; i < metadata.length; i++){
                    var fieldType = field['field_type'];
                    this.fields.push(
                            document.createElement(this.fieldsMapping[fieldType])
                    );
                }*/
                console.log(event);
            },

            getFormMetaData: function () {
                this.formMetadataService = document.createElement('iron-ajax');
                this.formMetadataService.url = '/test.json';
                //this.formMetadataService.handleAs = "json";
                this.appendChild(this.formMetadataService);
                this.formMetadataService.addEventListener('last-response-changed', this.generateForm.bind(this));
                this.formMetadataService.generateRequest();
            }
        })
    </script>
</dom-module>